<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Bugalha</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https: //fonts.googleapis.com/css2? family= Dancing+Script:wght@600 & family= Shadows+Into+Light & display=swap" rel="stylesheet">
    <style>
        body{
            font-family:  'Dancing Script', 'Shadows Into Light' ;
            font-size: 17px;
            background-color: cadetblue;
        }
        table{
            
            margin: auto;
            margin-top: 2em;
            border-collapse: collapse;
            width:30%;
        }
        th,td{
            height: 4em;
            padding: 40px;
            text-align:center;
            border: 4px solid #ccc;
        }
        th.bl:hover{
            background-color: #4acee6c9;
        }
        th.res,td.res{
            height: 4em;
            padding: 2px;
            text-align:center;
        }
        div.dado{
            border: 2px solid;
            padding-top: 20px;
            padding-bottom: 20px;
            margin-top: 10px;
            margin-bottom: 10px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            font-weight: 900;
            width: 5%;
            height: 4em;
        }
        div.res1 {
            text-align:center;
            font-weight: 600;
        }
        div.res2 {
            text-align:center;
            font-weight: 600;
        }
    </style>
</head>
<body onload="nn()">
    <div>
        <table>
            <tr>
                <th class="bl" id="p1x1y3" onclick="coloc('p1x1y3')">0</th>
                <th class="bl"  id="p1x2y3" onclick="coloc('p1x2y3')">0</th>
                <th class="bl" id="p1x3y3" onclick="coloc('p1x3y3')">0</th>
            </tr>
            
            <tr>
                <th class="bl" id="p1x1y2" onclick="coloc('p1x1y2')">0</th>
                <th class="bl" id="p1x2y2" onclick="coloc('p1x2y2')">0</th>
                <th class="bl" id="p1x3y2" onclick="coloc('p1x3y2')">0</th>
            </tr>
            
            <tr>
                <th class="bl" id="p1x1y1" onclick="coloc('p1x1y1')">0</th>
                <th class="bl" id="p1x2y1" onclick="coloc('p1x2y1')">0</th>
                <th class="bl" id="p1x3y1" onclick="coloc('p1x3y1')">0</th>
            </tr>
            <tr>
                <th id="r1x1" class="res">0</th>
                <th id="r1x2" class="res">0</th>
                <th id="r1x3" class="res">0</th>
            <tr>
        </table>
    </div>
    <div id = 'res1' class="res1">0</div>
    <div id="dd" class="dado">as</div>
    <div id = 'res2' class="res2">0</div>
    <div id="tes"></div>
        <table>
            <tr>
                <th id="r2x1" class="res">0</th>
                <th id="r2x2" class="res">0</th>
                <th id="r2x3" class="res">0</th>
            </tr>
            <tr>
                <th class="bl" id="p2x1y1" onclick="coloc('p2x1y1')">0</th>
                <th class="bl" id="p2x2y1" onclick="coloc('p2x2y1')">0</th>
                <th class="bl" id="p2x3y1" onclick="coloc('p2x3y1')">0</th>
            </tr>    
            <tr>
                <th class="bl" id="p2x1y2" onclick="coloc('p2x1y2')">0</th>
                <th class="bl" id="p2x2y2" onclick="coloc('p2x2y2')">0</th>
                <th class="bl" id="p2x3y2" onclick="coloc('p2x3y2')">0</th>
            </tr>
            <tr>
                <th class="bl" id="p2x1y3" onclick="coloc('p2x1y3')">0</th>
                <th class="bl" id="p2x2y3" onclick="coloc('p2x2y3')">0</th>
                <th class="bl" id="p2x3y3" onclick="coloc('p2x3y3')">0</th>
            </tr>    
        </table>
</body> 
    <script>
        var n = 0;
        var array = {'1x1y1':0,'1x1y2':0,'1x1y3':0,'1x2y1':0,'1x2y2':0,'1x2y3':0,'1x3y1':0,'1x3y2':0,'1x3y3':0,'2x1y1':0,'2x1y2':0,'2x1y3':0,'2x2y1':0,'2x2y2':0,'2x2y3':0,'2x3y1':0,'2x3y2':0,'2x3y3':0};
        var res = {'r1x1':0,'r1x2':0,'r1x3':0,'r2x1':0,'r2x2':0,'r2x3':0}
        var resultados = {'1':0,'2':0}
        function nn(){        
            var min = Math.ceil(1);
            var max = Math.floor(6);
            n = Math.floor(Math.random() * (max - min + 1)) + min;    
            var id = document.getElementById('dd');
            id.innerText = n;
        }
        function coloc(pos){
            var posi = document.getElementById(pos);
            num = pos.slice(1, 6);
            test=document.getElementById('tes');
            posant = (pos.slice(1,5))+ (parseInt(pos.charAt(5))-1);
            if (array[posant]==0){
                num = posant;
                posant = (pos.slice(1,5))+ (parseInt(pos.charAt(5))-2);
                if(array[posant]==0){
                    num = posant;
                }
            }
            if(array[num]!=0){
                exit();
            }
            array[num] =n;
            posi = document.getElementById('p'+num);
            posi.innerText = n;
            //removendo o n√∫mero do inimigo
            trabs = num.charAt(0);

            if(trabs=='1'){
                numb=1;
                let x = num.charAt(2);
                contri= '2x'+x+'y'+numb;
                if(array[contri]==n){
                    array[contri]=0
                }
                numb+=1;
                contri= '2x'+x+'y'+numb;
                if(array[contri]==n){
                    array[contri]=0
                }
                numb+=1;
                contri= '2x'+x+'y'+numb;
                if(array[contri]==n){
                    array[contri]=0
                }
            }

            if(trabs=='2'){
                numb=1;
                let x = num.charAt(2);
                contri= '1x'+x+'y'+numb;
                if(array[contri]==n){
                    array[contri]=0
                }
                numb+=1;
                contri= '1x'+x+'y'+numb;
                if(array[contri]==n){
                    array[contri]=0
                }
                numb+=1;
                contri= '1x'+x+'y'+numb;
                if(array[contri]==n){
                    array[contri]=0
                }
            }
            for(l in array){
                let loc = 'p'+l;
                let local = document.getElementById(loc);
                local.innerText=array[l] 
            }
            nn();

            som()
        }
        function som(){
            for (l in array){               
                tab = l.charAt(0); 
                loc = 'r'+tab+'x'+l.charAt(2);
                res[loc]+= parseInt(array[l]);
                
                //multiplicando
                let y = l.charAt(4); 
                soma=parseInt(y)-2;
                sub=parseInt(y)-1;
                let multp = l.slice(0,4)+soma; 
                let multa = l.slice(0,4)+sub;
                if (array[l]==array[multa] || array[l]==array[multp]){
                    res[loc]+=array[l]*2
                } 
                let lo = document.getElementById(loc);
                lo.innerText=res[`${loc}`]
            }
            for (l in res){
                f = l.charAt(1);
                resultados[f]+=parseInt(res[l]);
                ga = 'res'+f;
                local = document.getElementById(ga);
                local.innerText= resultados[`${f}`];
            } 
            resultados={'1':0,'2':0}
            res = {'r1x1':0,'r1x2':0,'r1x3':0,'r2x1':0,'r2x2':0,'r2x3':0}     
        }
    </script>
</html>